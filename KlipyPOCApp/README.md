# KlipyPOCApp – React Native Klipy Example

KlipyPOCApp is a minimal React Native app used as a proof of concept for the `react-native-klipy` SDK.
It demonstrates how to integrate Klipy's media selector and reactions UI into a simple chat-style
conversation screen on both iOS and Android.

## Project structure

- **App.tsx** – wraps the app in `SafeAreaProvider` and renders `ConversationScreen`.
- **ConversationScreen.tsx** – main example screen:
  - Initializes Klipy with `Klipy.initialize('<API_KEY>')`.
  - Displays a simple conversation log.
  - Opens the Klipy media selector from the "+" button.
  - Listens for selected reactions via `addReactionListener` and shows the last selection.
- **android / ios** – native projects generated by `@react-native-community/cli`.

## Prerequisites

- Node.js >= 20
- Yarn 1.x
- Xcode with iOS Simulator (for iOS)
- CocoaPods and Ruby Bundler (for iOS pods)
- Android Studio with Android SDK and an emulator or device
- A Klipy API key (replace the placeholder in `ConversationScreen.tsx`)

Make sure your environment is set up according to the official React Native
"Set Up Your Environment" guide for the React Native CLI.

## Installation

From the root of this repository:

```sh
cd KlipyPOCApp
yarn
```

This installs JavaScript dependencies and links the local `react-native-klipy` package
from `../react-native-klipy`.

### iOS native dependencies

Install Ruby gems and CocoaPods dependencies once (or after native changes):

```sh
cd ios
bundle install
bundle exec pod install
cd ..
```

## Running the app

### 1. Start Metro

From `KlipyPOCApp`:

```sh
yarn start
```

### 2. Run on Android

In another terminal, still in `KlipyPOCApp`:

```sh
yarn android
```

This builds and installs the app on a connected Android device or emulator.

### 3. Run on iOS

In another terminal, run:

```sh
yarn ios
```

This builds and runs the app in the iOS Simulator using the `KlipyPOCApp` Xcode project.

## How the Klipy example works

- The **+ button** next to the message input:
  - On iOS: calls `Klipy.open()` to present the Klipy UI.
  - On Android: toggles `MediaSelectorBottomSheet` to a partial height.
- When a user selects a reaction in Klipy:
  - `addReactionListener` is triggered with a `KlipyReaction`.
  - The reaction is appended to the message list.
  - The latest reaction is displayed in the "Last selected reaction" panel.
- Regular text messages typed into the input are added to the conversation log when you tap **Send**.

To adapt this example into your own app, copy `ConversationScreen.tsx` and the Klipy setup logic
into your project and integrate it with your existing navigation and conversation components.

## Troubleshooting

If you run into build or runtime issues:

- Verify your environment matches the official React Native setup guide for CLI projects.
- Ensure CocoaPods and `bundle exec pod install` have been run from the `ios` directory.
- Confirm the `react-native-klipy` local package is present at `../react-native-klipy`.
- Replace the demo API key in `ConversationScreen.tsx` with a valid Klipy key from your Klipy dashboard.

